Техническое задание на настройке прав доступа и функционала корпоративного Портала
Проект: Корпоративный портал с функцией CRM.
Цель: Реализовать систему разграничения прав доступа, регистрации сотрудников, безопасности и учета рабочего времени в рамках внедряемой CRM-системы.

Задача №1: Система уровней доступа и прав сотрудников
Цель: Создать гибкую систему разграничения прав доступа к информации и функциям портала, основанную на организационной структуре компании и ролевой модели.
1. Иерархия уровней доступа:
Предлагается реализовать комбинированную модель: Роли + Пространства (Проекты/Отделы).
1.1. Системные роли (формируются глобально):
Супер-Администратор: Полный доступ ко всем функциям, настройкам и данным на портале. Может управлять другими администраторами. (1-2 человека: собственник / опердир, тех.специалист).
Администратор: Доступ ко всем настройкам портала, кроме, возможно, критически важных (например, удаление портала). Может управлять сотрудниками, отделами, правами.
Менеджер: Базовый доступ к инструментам портала. Права на создание контента (задачи, проекты, статьи БЗ) ограничены их рабочими областями.
1.2. Функциональные права (назначаются в дополнение к роли):
Права предоставляются через привязку сотрудника к Отделу или через ручное назначение в Проекте/Рабочей группе.
Отдел "Администрация" (Директор, Операционный директор, Финансист):
Директор, Опер. директор: Полный доступ к дашбордам и отчетности по всем отделам (продажи, маркетинг, финансы). Доступ ко всем проектам и чатам. Просмотр аналитики по рабочему времени сотрудников.
Финансист:
Блок "Финансы": просмотр финансовых отчетов, движение по счетам.
Блок "Зарплата": расчет и формирование ведомостей (доступ только для финансиста и/или HRD).
Отчеты по продажам (доходная часть).
Исключение: Не имеет доступа к личным чатам сотрудников и не-финансовым проектам.
Отдел "Маркетинг" (Трафик, SMM):
Доступ к модулю "Маркетинг": создание и запуск рассылок (email, чат-боты), работа с воронками.
Доступ к CRM для настройки скриптов продаж и сплит-тестов.
Создание и управление проектами по запуску рекламных кампаний.
База знаний "Маркетинг".
Отдел "Продажи" (Менеджеры):
Доступ к CRM: просмотр воронки продаж, работа со своими лидами/клиентами.
Доступ к своим диалогам с клиентами (внутри CRM и чатах).
Доступ к истории заказов и чеков по своим клиентам.
База знаний "Продажи".
Исключение: Не видят сделки и финансовые отчеты других менеджеров.
Отдел "Продукт":
Доступ к модулю "База знаний" для создания и редактирования продуктового контента (медитации, расклады).
Доступ к проектам по разработке новых продуктов.
Исключение: Не имеют доступа к финансовым данным и детальной аналитике продаж.
Технический отдел:
Доступ к техническим настройкам портала (в рамках, делегированных Администратором).
Доступ к проектам по технической разработке.
Просмотр логов и системных ошибок.
2. Механизм реализации:
Создание Оргструктуры в CRM с отделами: Администрация, Маркетинг, Продажи, Продукт, Технический.
Назначение сотруднику Системной Роли (например, "Менеджер").
Прикрепление сотрудника к Отделу в оргструктуре, что автоматически дает ему пакет прав этого отдела.
Использование сущности "Проект" или "Рабочая группа" для точечного предоставления доступа к конкретным задачам, документам и обсуждениям. В проект можно приглашать сотрудников из разных отделов.

Задача №2: Регистрация сотрудника и управление профилем
Цель: Определить минимально необходимый набор данных для быстрого онбординга и предусмотреть возможность их дальнейшего расширения.
1. Данные при регистрации (приглашение):
Приглашение отправляется Администратором на email сотрудника. Ссылка ведет на форму регистрации, где необходимо заполнить:
Обязательные поля:
Имя
Фамилия
Email (подтверждается автоматически)
Номер телефона (для 2FA и уведомлений)
Пароль (с требованиями к сложности)
Автоматически проставляемые (нередактируемые сотрудником):
Отдел (выбирает Администратор при отправке приглашения)
Должность (выбирает Администратор)
2. Дополнение профиля после регистрации:
После входа сотрудник может (и мы его можем обязать) заполнить в своем профиле:
Дата рождения
Фотография/аватар
Краткая информация о себе (для команды)
Контактные мессенджеры (Telegram, WhatsApp)
3. Управление данными:
Сотрудник может редактировать: имя, фамилию, фото, контактные мессенджеры, информацию о себе.
Только Администратор/HR может редактировать: отдел, должность, рабочий email, служебный номер телефона.
История изменений критичных данных (отдел, должность) должна логироваться.

Задача №3: Мониторинг безопасности и сессий
Цель: Повысить безопасность портала за счет отслеживания подозрительной активности.
Требования:
В админ-панели для ролей "Супер-Администратор" и "Администратор" должен быть раздел "Безопасность и сессии".
В данном разделе в виде таблицы/отчета отображается:
Сотрудник
Время входа и выхода (последние N сессий)
IP-адрес, с которого была осуществлена каждая сессия.
Геолокация (город, страна), определенная по IP.
Устройство и браузер.
Система оповещений:
Реализовать механизм автоматического оповещения (внутрисистемное уведомление или email) Администратора при обнаружении "подозрительной активности".
Критерий "подозрительной активности": Вход с двух IP-адресов, географически расположенных в разных городах РФ (например, Москва и Новосибирск), в течение короткого промежутка времени (например, менее 6 часов). Это может указывать на совместное использование учетной записи.

Задача №4: Учет рабочего времени и присутствия
Цель: Автоматически фиксировать время работы сотрудника на портале для анализа производительности и расчета рабочего времени.
Требования:
Реализовать модуль "Учет времени" или "Присутствие".
Механизм трекинга:
Система автоматически начинает учет времени с момента входа сотрудника в портал.
Сотрудник вручную нажимает кнопку "Начать смену" при старте работы и "Завершить смену" в конце. Второй вариант более подходящий, так как портал может быть открыт в фоне.
Учет активности:
Система фиксирует не просто факт входа, а активные действия сотрудника (переход по разделам, клики, набор текста, работа с задачами).
При отсутствии активных действий в течение N минут (например, 15) система автоматически ставит сотрудника на паузу.
Формирование отчетов:
В личном кабинете сотрудника: сводка за день/неделю (общее время, время на задачах, время пауз).
В админ-панели для руководителей отделов и администрации: сводные отчеты по сотрудникам и отделам.
В отчете должна быть видна разница между "Время в системе" и "Активное рабочее время".
Интеграция с задачами: Возможность учета времени, затраченного на конкретную задачу (через встроенный таймер в задаче).



